<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="format-detection" content="telephone=no">
  <title>Student Application Entry Form</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --primary-green: #10b981;
      --primary-green-dark: #059669;
      --primary-green-light: #34d399;
      --secondary-green: #6ee7b7;
      --accent-green: #a7f3d0;
      --success-green: #065f46;
      --bg-green: #ecfdf5;
      --border-green: #d1fae5;
      --text-dark: #1f2937;
      --text-muted: #6b7280;
      --text-light: #9ca3af;
      --white: #ffffff;
      --shadow-light: rgba(16, 185, 129, 0.1);
      --shadow-medium: rgba(16, 185, 129, 0.2);
      --gradient-primary: linear-gradient(135deg, var(--primary-green) 0%, var(--primary-green-dark) 100%);
      --gradient-bg: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
    }
    * { box-sizing: border-box; }
    body { background: var(--gradient-bg); font-family: 'Inter', sans-serif; color: var(--text-dark); line-height: 1.6; min-height: 100vh; position: relative; }
    body::before { content: ''; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(circle at 20% 20%, rgba(16, 185, 129, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(52, 211, 153, 0.1) 0%, transparent 50%), radial-gradient(circle at 50% 50%, rgba(167, 243, 208, 0.05) 0%, transparent 50%); pointer-events: none; z-index: -1; }
    .main-container { max-width: 1200px; margin: 0 auto; padding: 2rem 1rem; position: relative; z-index: 1; }
    .form-card { background: var(--white); border: 1px solid var(--border-green); border-radius: 24px; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04), 0 0 0 1px var(--shadow-light); padding: 3rem; margin-bottom: 2rem; position: relative; overflow: hidden; }
    .form-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 6px; background: var(--gradient-primary); }
    .header-section { text-align: center; margin-bottom: 3rem; position: relative; }
    .form-title { background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 700; font-size: 2.5rem; margin-bottom: 0.5rem; letter-spacing: -0.02em; }
    .form-subtitle { color: var(--text-muted); font-size: 1.1rem; font-weight: 500; margin-bottom: 0; }
    .icon-badge { display: inline-flex; align-items: center; justify-content: center; width: 80px; height: 80px; background: var(--gradient-primary); border-radius: 50%; margin-bottom: 1.5rem; box-shadow: 0 10px 25px var(--shadow-medium); }
    .icon-badge i { font-size: 2rem; color: var(--white); }
    .form-section { margin-bottom: 2rem; }
    .section-title { color: var(--text-dark); font-weight: 600; font-size: 1.1rem; margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--accent-green); position: relative; }
    .section-title::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 60px; height: 2px; background: var(--primary-green); }
    .form-label { font-weight: 600; color: var(--text-dark); margin-bottom: 0.75rem; font-size: 0.95rem; display: flex; align-items: center; gap: 0.5rem; }
    .form-label i { color: var(--primary-green); font-size: 1rem; }
    .form-control, .form-select { border: 2px solid #e5e7eb; border-radius: 12px; padding: 0.875rem 1.25rem; font-size: 1rem; font-weight: 500; transition: all 0.3s ease; background-color: var(--white); color: var(--text-dark); box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); }
    .form-control:focus, .form-select:focus { border-color: var(--primary-green); box-shadow: 0 0 0 3px var(--shadow-light), 0 4px 6px -1px rgba(0, 0, 0, 0.1); background-color: var(--white); transform: translateY(-1px); }
    .form-control.is-invalid, .form-select.is-invalid { border-color: #ef4444; background-color: #fef2f2; box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1); }
    .form-control.is-valid, .form-select.is-valid { border-color: var(--primary-green); background-color: var(--bg-green); box-shadow: 0 0 0 3px var(--shadow-light); }
    .input-group-text { background: var(--accent-green); border: 2px solid #e5e7eb; border-right: none; color: var(--success-green); font-weight: 600; border-radius: 12px 0 0 12px; }
    .input-group .form-control { border-left: none; border-radius: 0 12px 12px 0; }
    .input-group:focus-within .input-group-text { border-color: var(--primary-green); background: var(--secondary-green); }
    .btn-primary { background: var(--gradient-primary); border: none; border-radius: 16px; padding: 1rem 3rem; font-weight: 700; font-size: 1.1rem; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 0.5px; box-shadow: 0 10px 15px -3px var(--shadow-medium), 0 4px 6px -2px var(--shadow-light); position: relative; overflow: hidden; }
    .btn-primary::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent); transition: left 0.5s ease; }
    .btn-primary:hover { background: linear-gradient(135deg, var(--primary-green-dark) 0%, #047857 100%); transform: translateY(-2px); box-shadow: 0 20px 25px -5px var(--shadow-medium), 0 10px 10px -5px var(--shadow-light); }
    .btn-primary:hover::before { left: 100%; }
    .btn-primary:active { transform: translateY(0); }
    .btn-primary:disabled { background: var(--text-light); transform: none; box-shadow: none; cursor: not-allowed; }
    .alert { border: none; border-radius: 16px; font-weight: 500; margin-top: 2rem; padding: 1.25rem 1.5rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
    .alert-success { background: var(--bg-green); color: var(--success-green); border-left: 4px solid var(--primary-green); }
    .alert-danger { background: #fef2f2; color: #991b1b; border-left: 4px solid #ef4444; }
    .required-asterisk { color: #ef4444; margin-left: 2px; font-weight: 600; }
    .spinner-border-sm { width: 1.2rem; height: 1.2rem; margin-right: 0.5rem; border-width: 2px; }
    .invalid-feedback { font-weight: 500; font-size: 0.875rem; margin-top: 0.5rem; }
    .valid-feedback { color: var(--success-green); font-weight: 500; font-size: 0.875rem; margin-top: 0.5rem; }
    .loading-overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255, 255, 255, 0.9); display: flex; align-items: center; justify-content: center; border-radius: 24px; z-index: 1000; }
    .loading-spinner { width: 50px; height: 50px; border: 4px solid var(--accent-green); border-top: 4px solid var(--primary-green); border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .form-submitted { animation: formSuccess 0.6s ease-out forwards; }
    @keyframes formSuccess { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
    @media (max-width: 768px) { .main-container { padding: 1rem 0.75rem; } .form-card { padding: 2rem 1.5rem; border-radius: 20px; margin-bottom: 1rem; } .form-title { font-size: 2rem; } .form-subtitle { font-size: 1rem; } .icon-badge { width: 60px; height: 60px; margin-bottom: 1rem; } .icon-badge i { font-size: 1.5rem; } .btn-primary { padding: 0.875rem 2rem; font-size: 1rem; width: 100%; } .form-control, .form-select { padding: 0.75rem 1rem; font-size: 1rem; } .section-title { font-size: 1rem; } }
    @media (max-width: 576px) { .form-card { padding: 1.5rem 1rem; border-radius: 16px; } .form-title { font-size: 1.75rem; } .header-section { margin-bottom: 2rem; } .icon-badge { width: 50px; height: 50px; } .icon-badge i { font-size: 1.25rem; } }
    @media (prefers-reduced-motion: reduce) { *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; } }
    @media (prefers-color-scheme: dark) { :root { --text-dark: #f9fafb; --text-muted: #d1d5db; --white: #1f2937; --bg-green: #064e3b; --border-green: #065f46; } body { background: linear-gradient(135deg, #111827 0%, #1f2937 100%); } .form-card { background: #374151; border-color: #4b5563; } .form-control, .form-select { background-color: #4b5563; border-color: #6b7280; color: #f9fafb; } .form-control:focus, .form-select:focus { background-color: #4b5563; } }
    .was-validated .form-control:invalid, .was-validated .form-select:invalid { border-color: #ef4444; background-color: #fef2f2; }
    .was-validated .form-control:valid, .was-validated .form-select:valid { border-color: var(--primary-green); background-color: var(--bg-green); }
  </style>
</head>
<body>
  <div class="main-container">
    <div class="form-card">
      <div class="header-section">
        <div class="icon-badge">
          <i class="bi bi-person-fill-add"></i>
        </div>
        <h1 class="form-title">Student Application Entry Form</h1>
        <p class="form-subtitle">Apply for your course - Fill out all required fields to submit your application</p>
      </div>
      
      <form id="applicationForm" novalidate>
        <div class="form-section">
          <h3 class="section-title">
            <i class="bi bi-person-circle me-2"></i>
            Personal Information
          </h3>
          <div class="row g-4">
            <div class="col-md-4">
              <label for="fullName" class="form-label">
                <i class="bi bi-person"></i>
                Full Name<span class="required-asterisk">*</span>
              </label>
              <input type="text" class="form-control" id="fullName" name="fullName" required 
                     autocomplete="name" placeholder="Enter your full name">
              <div class="invalid-feedback">Please provide your full name.</div>
              <div class="valid-feedback">Looks good!</div>
            </div>
            
            <div class="col-md-4">
              <label for="fatherName" class="form-label">
                <i class="bi bi-person"></i>
                Father Name<span class="required-asterisk">*</span>
              </label>
              <input type="text" class="form-control" id="fatherName" name="fatherName" required 
                     placeholder="Enter father's name">
              <div class="invalid-feedback">Please provide father's name.</div>
              <div class="valid-feedback">Looks good!</div>
            </div>
            
            <div class="col-md-4">
              <label for="mobile" class="form-label">
                <i class="bi bi-phone"></i>
                Mobile Number<span class="required-asterisk">*</span>
              </label>
              <div class="input-group">
                <span class="input-group-text">+91</span>
                <input type="tel" class="form-control" id="mobile" name="mobile" required 
                       autocomplete="tel" placeholder="10 digit number" maxlength="10" pattern="[0-9]{10}">
              </div>
              <div class="invalid-feedback">Please provide a valid 10-digit mobile number.</div>
              <div class="valid-feedback">Mobile number is valid!</div>
            </div>
            
            <div class="col-md-4">
              <label for="aadharNo" class="form-label">
                <i class="bi bi-card-text"></i>
                Aadhar No<span class="required-asterisk">*</span>
              </label>
              <input type="text" class="form-control" id="aadharNo" name="aadharNo" required 
                     placeholder="Enter 12-digit Aadhar number" maxlength="12" pattern="[0-9]{12}">
              <div class="invalid-feedback">Please provide a valid 12-digit Aadhar number.</div>
              <div class="valid-feedback">Aadhar number is valid!</div>
            </div>
            
            <div class="col-md-4">
              <label for="email" class="form-label">
                <i class="bi bi-envelope"></i>
                Email Address<span class="required-asterisk">*</span>
              </label>
              <input type="email" class="form-control" id="email" name="email" required 
                     autocomplete="email" placeholder="user@example.com">
              <div class="invalid-feedback">Please provide a valid email address.</div>
              <div class="valid-feedback">Email looks great!</div>
            </div>
            
            <div class="col-md-4">
              <label for="district" class="form-label">
                <i class="bi bi-geo-alt"></i>
                District<span class="required-asterisk">*</span>
              </label>
              <select class="form-select" id="district" name="district" required autocomplete="address-level2">
                <option value="">Select District</option>
                <option value="Ariyalur">Ariyalur</option>
                <option value="Chengalpattu">Chengalpattu</option>
                <option value="Chennai">Chennai</option>
                <option value="Coimbatore">Coimbatore</option>
                <option value="Cuddalore">Cuddalore</option>
                <option value="Dharmapuri">Dharmapuri</option>
                <option value="Dindigul">Dindigul</option>
                <option value="Erode">Erode</option>
                <option value="Kallakurichi">Kallakurichi</option>
                <option value="Kancheepuram">Kancheepuram</option>
                <option value="Kanniyakumari">Kanniyakumari</option>
                <option value="Karur">Karur</option>
                <option value="Krishnagiri">Krishnagiri</option>
                <option value="Madurai">Madurai</option>
                <option value="Mayiladuthurai">Mayiladuthurai</option>
                <option value="Nagapattinam">Nagapattinam</option>
                <option value="Namakkal">Namakkal</option>
                <option value="Nilgiris">Nilgiris</option>
                <option value="Perambalur">Perambalur</option>
                <option value="Pudukkottai">Pudukkottai</option>
                <option value="Ramanathapuram">Ramanathapuram</option>
                <option value="Ranipet">Ranipet</option>
                <option value="Salem">Salem</option>
                <option value="Sivagangai">Sivagangai</option>
                <option value="Tenkasi">Tenkasi</option>
                <option value="Thanjavur">Thanjavur</option>
                <option value="Theni">Theni</option>
                <option value="Thoothukudi">Thoothukudi</option>
                <option value="Tiruchirappalli">Tiruchirappalli</option>
                <option value="Tirunelveli">Tirunelveli</option>
                <option value="Tirupathur">Tirupathur</option>
                <option value="Tiruppur">Tiruppur</option>
                <option value="Tiruvallur">Tiruvallur</option>
                <option value="Tiruvannamalai">Tiruvannamalai</option>
                <option value="Tiruvarur">Tiruvarur</option>
                <option value="Vellore">Vellore</option>
                <option value="Viluppuram">Viluppuram</option>
                <option value="Virudhunagar">Virudhunagar</option>
              </select>
              <div class="invalid-feedback">Please select your district.</div>
              <div class="valid-feedback">District selected!</div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="section-title">
            <i class="bi bi-card-text me-2"></i>
            Personal Details
          </h3>
          <div class="row g-4">
            <div class="col-md-4">
              <label for="dob" class="form-label">
                <i class="bi bi-calendar"></i>
                Date of Birth<span class="required-asterisk">*</span>
              </label>
              <input type="date" class="form-control" id="dob" name="dob" required autocomplete="bday">
              <div class="invalid-feedback">Please select your date of birth.</div>
              <div class="valid-feedback">Date of birth confirmed!</div>
            </div>
            
            <div class="col-md-4">
              <label for="gender" class="form-label">
                <i class="bi bi-person-badge"></i>
                Gender<span class="required-asterisk">*</span>
              </label>
              <select class="form-select" id="gender" name="gender" required autocomplete="sex">
                <option value="">Select Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
              </select>
              <div class="invalid-feedback">Please select your gender.</div>
              <div class="valid-feedback">Gender selected!</div>
            </div>
            
            <div class="col-md-4">
              <label for="educationLevel" class="form-label">
                <i class="bi bi-mortarboard"></i>
                Education Level<span class="required-asterisk">*</span>
              </label>
              <select class="form-select" id="educationLevel" name="educationLevel" required>
                <option value="">Select Education Level</option>
                <option value="10th Pass">10th Pass</option>
                <option value="12th/Intermediate">12th/Intermediate</option>
                <option value="Graduate Degree">Graduate Degree</option>
                <option value="Post Graduate">Post Graduate</option>
              </select>
              <div class="invalid-feedback">Please select your education level.</div>
              <div class="valid-feedback">Education level confirmed!</div>
            </div>
            
            <div class="col-md-6">
              <label for="schoolName" class="form-label">
                <i class="bi bi-building"></i>
                School Name<span class="required-asterisk">*</span>
              </label>
              <input type="text" class="form-control" id="schoolName" name="schoolName" required 
                     placeholder="Enter school name">
              <div class="invalid-feedback">Please provide school name.</div>
              <div class="valid-feedback">Looks good!</div>
            </div>
            
            <div class="col-md-6">
              <label for="schoolAddress" class="form-label">
                <i class="bi bi-geo-alt-fill"></i>
                School Address<span class="required-asterisk">*</span>
              </label>
              <input type="text" class="form-control" id="schoolAddress" name="schoolAddress" required 
                     placeholder="Enter school address">
              <div class="invalid-feedback">Please provide school address.</div>
              <div class="valid-feedback">Looks good!</div>
            </div>
            
            <div class="col-md-12">
              <label for="group12" class="form-label">
                <i class="bi bi-book"></i>
                12th Group<span class="required-asterisk">*</span>
              </label>
              <select class="form-select" id="group12" name="group12" required>
                <option value="">Select 12th Group</option>
                <option value="MPC+CS">MPC+CS</option>
                <option value="MPC+Bio">MPC+Bio</option>
                <option value="PCBZ">PCBZ</option>
                <option value="Acct+Comm+Econ+CS">Acct+Comm+Econ+CS</option>
                <option value="Others">Others</option>
              </select>
              <div class="invalid-feedback">Please select your 12th group.</div>
              <div class="valid-feedback">Group selected!</div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3 class="section-title">
            <i class="bi bi-briefcase me-2"></i>
            Application Details
          </h3>
          <div class="row g-4">
            <div class="col-md-6">
              <label for="appliedFor1st" class="form-label">
                <i class="bi bi-list-check"></i>
                Applied For (1st Preference)<span class="required-asterisk">*</span>
              </label>
              <select class="form-select" id="appliedFor1st" name="appliedFor1st" required>
                <option value="">Select Field</option>
                <option value="Agriculture & Allied Sciences">Agriculture & Allied Sciences</option>
                <option value="Arts & Humanities">Arts & Humanities</option>
                <option value="Commerce & Management">Commerce & Management</option>
                <option value="Computer Science & IT">Computer Science & IT</option>
                <option value="Design, Media & Fine Arts">Design, Media & Fine Arts</option>
                <option value="Education">Education</option>
                <option value="Engineering & Technology">Engineering & Technology</option>
                <option value="Hotel Management & Hospitality">Hotel Management & Hospitality</option>
                <option value="Law (LLB)">Law (LLB)</option>
                <option value="Medical & Health Sciences">Medical & Health Sciences</option>
                <option value="Nursing & Allied Health Sciences (AHS)">Nursing & Allied Health Sciences (AHS)</option>
                <option value="Pharmacy">Pharmacy</option>
                <option value="Vocational & Skill-based Courses">Vocational & Skill-based Courses</option>
                <option value="Other Specialized Fields">Other Specialized Fields</option>
              </select>
              <div class="invalid-feedback">Please select 1st preference.</div>
              <div class="valid-feedback">Selected!</div>
            </div>
            
            <div class="col-md-6">
              <label for="appliedFor2nd" class="form-label">
                <i class="bi bi-list-check"></i>
                Applied For (2nd Preference)<span class="required-asterisk">*</span>
              </label>
              <select class="form-select" id="appliedFor2nd" name="appliedFor2nd" required>
                <option value="">Select Field</option>
                <option value="Agriculture & Allied Sciences">Agriculture & Allied Sciences</option>
                <option value="Arts & Humanities">Arts & Humanities</option>
                <option value="Commerce & Management">Commerce & Management</option>
                <option value="Computer Science & IT">Computer Science & IT</option>
                <option value="Design, Media & Fine Arts">Design, Media & Fine Arts</option>
                <option value="Education">Education</option>
                <option value="Engineering & Technology">Engineering & Technology</option>
                <option value="Hotel Management & Hospitality">Hotel Management & Hospitality</option>
                <option value="Law (LLB)">Law (LLB)</option>
                <option value="Medical & Health Sciences">Medical & Health Sciences</option>
                <option value="Nursing & Allied Health Sciences (AHS)">Nursing & Allied Health Sciences (AHS)</option>
                <option value="Pharmacy">Pharmacy</option>
                <option value="Vocational & Skill-based Courses">Vocational & Skill-based Courses</option>
                <option value="Other Specialized Fields">Other Specialized Fields</option>
              </select>
              <div class="invalid-feedback">Please select 2nd preference.</div>
              <div class="valid-feedback">Selected!</div>
            </div>
            
            <div class="col-md-12">
              <label for="studyLocation" class="form-label">
                <i class="bi bi-geo"></i>
                Study Location<span class="required-asterisk">*</span>
              </label>
              <select class="form-select" id="studyLocation" name="studyLocation" required>
                <option value="">Select Location</option>
                <option value="Same District">Same District</option>
                <option value="Outside District">Outside District</option>
              </select>
              <div class="invalid-feedback">Please select study location.</div>
              <div class="valid-feedback">Location selected!</div>
            </div>
          </div>
        </div>
        
        <div class="row mt-5">
          <div class="col-12 text-center">
            <button type="submit" class="btn btn-primary btn-lg" id="submitBtn">
              <i class="bi bi-send me-2"></i>
              Submit Application
            </button>
          </div>
        </div>
      </form>
      
      <div id="messageDiv"></div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
  <script>
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    
    window.onload = function() {
      if (isMobile) {
        const inputs = document.querySelectorAll('input, select');
        inputs.forEach(input => {
          input.addEventListener('focus', function() {
            this.style.fontSize = '16px';
          });
        });
        
        if ('vibrate' in navigator) {
          document.getElementById('submitBtn').addEventListener('click', function() {
            navigator.vibrate(50);
          });
        }
      }
    };

    const form = document.getElementById('applicationForm');
    const submitButton = document.getElementById('submitBtn');
    const messageDiv = document.getElementById('messageDiv');

    document.getElementById('mobile').addEventListener('input', function(e) {
      this.value = this.value.replace(/[^0-9]/g, '');
      if (this.value.length > 10) this.value = this.value.slice(0, 10);
    });

    document.getElementById('aadharNo').addEventListener('input', function(e) {
      this.value = this.value.replace(/[^0-9]/g, '');
      if (this.value.length > 12) this.value = this.value.slice(0, 12);
    });

    const inputs = document.querySelectorAll('input, select');
    inputs.forEach(input => {
      input.addEventListener('blur', function() {
        validateField(this);
      });
      input.addEventListener('input', function() {
        if (this.classList.contains('is-invalid')) this.classList.remove('is-invalid');
        if (this.value.trim()) validateField(this);
      });
    });

    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      form.classList.remove('was-validated');
      messageDiv.innerHTML = '';
      
      if (!form.checkValidity()) {
        e.stopPropagation();
        form.classList.add('was-validated');
        const firstInvalid = form.querySelector(':invalid');
        if (firstInvalid) {
          firstInvalid.focus();
          if (isMobile) firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        showMessage('Please complete all required fields correctly.', 'danger');
        return;
      }
      
      const mobile = document.getElementById('mobile').value;
      const email = document.getElementById('email').value;
      const aadharNo = document.getElementById('aadharNo').value;
      
      if (!validateMobile(mobile)) {
        document.getElementById('mobile').classList.add('is-invalid');
        showMessage('Please enter a valid 10-digit mobile number.', 'danger');
        return;
      }
      
      if (!validateEmail(email)) {
        document.getElementById('email').classList.add('is-invalid');
        showMessage('Please enter a valid email address.', 'danger');
        return;
      }

      if (!validateAadhar(aadharNo)) {
        document.getElementById('aadharNo').classList.add('is-invalid');
        showMessage('Please enter a valid 12-digit Aadhar number.', 'danger');
        return;
      }

      submitButton.disabled = true;
      submitButton.innerHTML = '<span class="spinner-border spinner-border-sm" role="status"></span>Submitting...';
      
      const loadingOverlay = document.createElement('div');
      loadingOverlay.className = 'loading-overlay';
      loadingOverlay.innerHTML = '<div class="loading-spinner"></div>';
      document.querySelector('.form-card').style.position = 'relative';
      document.querySelector('.form-card').appendChild(loadingOverlay);

      const formData = {
        fullName: document.getElementById('fullName').value.trim(),
        fatherName: document.getElementById('fatherName').value.trim(),
        mobile: document.getElementById('mobile').value.trim(),
        aadharNo: document.getElementById('aadharNo').value.trim(),
        email: document.getElementById('email').value.trim(),
        district: document.getElementById('district').value,
        dob: document.getElementById('dob').value,
        gender: document.getElementById('gender').value,
        educationLevel: document.getElementById('educationLevel').value,
        schoolName: document.getElementById('schoolName').value.trim(),
        schoolAddress: document.getElementById('schoolAddress').value.trim(),
        group12: document.getElementById('group12').value,
        appliedFor1st: document.getElementById('appliedFor1st').value,
        appliedFor2nd: document.getElementById('appliedFor2nd').value,
        studyLocation: document.getElementById('studyLocation').value,
        ipAddress: await getIpAddress(),
        timestamp: new Date().toISOString()
      };

      fetch('https://script.google.com/macros/s/AKfycbyAWjo24EpbOUFzVuLeHn7i3BizYVzC73cxr7jAPmFfMdTG-YPQuM6JYwpL0iFL8TJVsg/exec', {
        method: 'POST',
        mode: 'cors',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(formData)
      })
      .then(response => response.json())
      .then(data => {
        loadingOverlay.remove();
        submitButton.disabled = false;
        submitButton.innerHTML = '<i class="bi bi-send me-2"></i>Submit Application';
        
        if (data.status === 'success') {
          document.querySelector('.form-card').classList.add('form-submitted');
          showMessage(data.message || 'Application submitted successfully! We will contact you soon.', 'success');
          form.reset();
          form.classList.remove('was-validated');
          inputs.forEach(input => input.classList.remove('is-valid', 'is-invalid'));
          if (isMobile) messageDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
        } else {
          showMessage(data.message || 'Submission failed. Please try again.', 'danger');
        }
      })
      .catch(error => {
        loadingOverlay.remove();
        submitButton.disabled = false;
        submitButton.innerHTML = '<i class="bi bi-send me-2"></i>Submit Application';
        showMessage('Network error. Please check your connection and try again.', 'danger');
        console.error('Submission error:', error);
      });
    });

    async function getIpAddress() {
      try {
        const response = await fetch('https://api.ipify.org?format=json');
        const data = await response.json();
        return data.ip;
      } catch (error) {
        console.warn("Could not fetch IP address:", error);
        return "N/A";
      }
    }

    function validateField(fieldElement) {
      const value = fieldElement.value.trim();
      let isValid = true;
      if (fieldElement.hasAttribute('required') && !value) isValid = false;
      else if (fieldElement.type === 'email' && value && !validateEmail(value)) isValid = false;
      else if (fieldElement.type === 'tel' && value && !validateMobile(value)) isValid = false;
      else if (fieldElement.id === 'aadharNo' && value && !validateAadhar(value)) isValid = false;
      if (isValid) {
        fieldElement.classList.remove('is-invalid');
        fieldElement.classList.add('is-valid');
      } else {
        fieldElement.classList.remove('is-valid');
        fieldElement.classList.add('is-invalid');
      }
      return isValid;
    }

    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email.toLowerCase());
    }

    function validateMobile(mobile) {
      const re = /^\d{10}$/;
      return re.test(mobile);
    }

    function validateAadhar(aadhar) {
      const re = /^\d{12}$/;
      return re.test(aadhar);
    }

    function showMessage(message, type) {
      const alertClass = type === 'success' ? 'alert-success' : 'alert-danger';
      const icon = type === 'success' ? 'bi-check-circle-fill' : 'bi-exclamation-triangle-fill';
      messageDiv.innerHTML = `<div class="alert ${alertClass} d-flex align-items-center" role="alert"><i class="bi ${icon} me-2" style="font-size: 1.2rem;"></i><div>${message}</div></div>`;
      if (type === 'success') setTimeout(() => messageDiv.innerHTML = '', 5000);
    }

    form.addEventListener('keypress', function(e) {
      if (e.key === 'Enter' && e.target.tagName !== 'BUTTON') {
        e.preventDefault();
        const inputs = Array.from(form.querySelectorAll('input, select'));
        const currentIndex = inputs.indexOf(e.target);
        const nextInput = inputs[currentIndex + 1];
        if (nextInput) nextInput.focus();
      }
    });

    document.addEventListener('DOMContentLoaded', function() {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
          }
        });
      });
      document.querySelectorAll('.form-section').forEach(section => {
        section.style.opacity = '0';
        section.style.transform = 'translateY(20px)';
        section.style.transition = 'all 0.6s ease';
        observer.observe(section);
      });
    });
  </script>
</body>
</html>
